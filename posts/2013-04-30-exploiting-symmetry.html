<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Exploiting Symmetry</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-readable.min.css" />
    <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/default.css" />
    <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    <link rel="stylesheet" type="text/css" href="../css/minimalist.css" />

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
  </head>
  <body>
    <div class="container">
      <div class="header row">
        <h3><a class="text-muted col-sm-8" href="../">begriffs</a></h3>

        <ul class="col-sm-4 list-inline">
          <li><a class="text-muted" href="../about.html"><i class="fa fa-info-circle"></i></a></li>
          <li><a class="text-muted" href="http://github.com/begriffs"><i class="fa fa-github"></i></a></li>
          <li><a class="text-muted" href="http://twitter.com/begriffs"><i class="fa fa-twitter"></i></a></li>
          <li><a class="text-muted" href="../atom.xml"><i class="fa fa-rss"></i></a></li>
        </ul>
      </div>

      <div class="post-header">
  <h3>Exploiting Symmetry</h3>
  <a href="https://twitter.com/share" class="twitter-share-button pull-right" data-via="begriffs" data-count="none">Tweet</a>
  <h5 class="text-muted">April 30, 2013</h5>
</div>

<div class="content">
  <p>During tonight’s <a href="http://www.meetup.com/Mad-Railers/events/103141692/">Madrailers</a> meetup everyone worked on a kata to play the “word morph” game. You pick two arbitrary words and see if one can be converted to the other by changing only one letter at a time where the resulting intermediate words are valid.</p>
<p>It’s an interesting puzzle, and rather than solve it directly I wanted to discover some general statistics about how connected English words are generally. Rather than choosing two words and seeing if they are connected, I wanted to survey the equivalence classes of this connectedness.</p>
<p>I needed to write a program, but I realized that the program can operate on more general structures than simply words and letter manipulations. It turns out that the relation of “differing by one letter” is symmetric, and our program can extend it to a full <a href="https://en.wikipedia.org/wiki/Equivalence_relation">equivalence relation</a> and then calculate its equivalence classes on a finite set.</p>
<p>To get an idea how this works, let’s consider the symmetric relation on integers of “differing by three.” The transitive closure of this relation is “differing by any nonzero multiple of three” and the reflexive closure of that is “differing by any multiple of three.” The equivalence classes of this last relation on [0,1,2,3,4,5,6,7,8] are [[0,3,6], [1,4,7], [2,5,8]]. Let’s look at the general JavaScript code which acts on symmetric relations and see how it behaves on the number example.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="fu">eq_classes</span>(set, rel) {
  <span class="kw">var</span> classes = {}, connected_stack, root,
    stack_top, elt, pushed_more;

  <span class="kw">while</span>(<span class="ot">set</span>.<span class="fu">length</span> &gt; <span class="dv">0</span>) {
    root = <span class="ot">set</span>.<span class="fu">shift</span>();
    classes[root] = [root];
    connected_stack = [root];

    <span class="kw">while</span>(<span class="ot">connected_stack</span>.<span class="fu">length</span> &gt; <span class="dv">0</span>) {
      stack_top = connected_stack[<span class="ot">connected_stack</span>.<span class="fu">length</span> - <span class="dv">1</span>];
      pushed_more = <span class="kw">false</span>;
      <span class="kw">for</span>(elt <span class="kw">in</span> set) {
        <span class="kw">if</span>(<span class="fu">rel</span>(stack_top, set[elt])) {
          pushed_more = <span class="kw">true</span>;
          <span class="ot">connected_stack</span>.<span class="fu">push</span>(set[elt]);
          classes[root].<span class="fu">push</span>(set[elt]);
          <span class="ot">set</span>.<span class="fu">splice</span>(elt, <span class="dv">1</span>);
        }
      }
      <span class="kw">if</span>(!pushed_more) {
        <span class="ot">connected_stack</span>.<span class="fu">pop</span>();
      }
    }
  }
  <span class="kw">return</span> classes;
}</code></pre>
<p>If we run it, we see that it returns an object with each representative mapping to its class:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="fu">eq_classes</span>(
  [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>],
  <span class="kw">function</span>(a,b) { <span class="kw">return</span> <span class="ot">Math</span>.<span class="fu">abs</span>(a-b) === <span class="dv">3</span>; }
);
<span class="co">// returns {0: [0,3,6], 1: [1,4,7], 2: [2,5,8]}</span></code></pre>
<p>Returning to the word morph game, I ran <code>eq_classes()</code> on <code>/usr/share/dict/words</code> with the word relation of “differing by one letter.” The results are interesting. Obviously all one-letter words are equivalent to one another. But so are all two-letter words, and almost all three-letter words. The exceptions are “Eli”, “Emm”, “Osc”, “edh”, “its”, and “nth” which are not equivalent to any word except themselves.</p>
<p>The vast majority of four letter words are all equivalent. There are 158 equivalence classes, most of which have only one word ([“ruby”] is one such). After the class containing 5073 words, the next largest classes have four words (such as [“idic”, “odic”, “Udic”, “otic”]).</p>
<p>The longer the words become, the more disconnected their classes become. By the time you get to fourteen-letter words, there are 9233 classes among 9765 words. The largest class has seven items: [“invendibleness”, “inventibleness”, “unvendibleness”, “unvendableness”, “unbendableness”, “unmendableness”, “unbondableness”], but there are 8759 single-word classes.</p>
<p>What does this tell us? The only reason that every word is not equivalent to every other of the same length is that we tend to avoid certain combinations of letters. Small words are convenient to write, so we have exhausted a greater ratio of valid short words to total short letter combinations. However we are wasteful and choose longer sequences of letters haphazardly, leaving big holes in the larger state space. If our symbols were all phonetic (such as in a language like Telugu which spells by the syllable) I think we would have greater connectedness.</p>
<p>I like this challenge not just for what it tells us about English, but as an opportunity to think of algorithms <a href="2013-02-23-what-might-programming-become.html">more abstractly</a>. That said, somebody in the 1970s has doubtless written a similar function that runs an order of magnitude faster than mine. Let me know if you see a way to improve it.</p>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'begriffs';

  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    </div>

    <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="../js/flowplayer.min.js"></script>
    <!-- Aww yiss, obsessively watching my numbers! -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-49573102-1', 'begriffs.com');
      ga('send', 'pageview');
    </script>

    <footer class="container">
      <p>begriffs:&nbsp;&nbsp;<a href="mailto:joe@begriffs.com" role="button">hire me</a> → get data → analyze → api → ◕‿◕</p>
    </footer>
  </body>
</html>
