<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Circular Statistics of SF Bus Routes</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-readable.min.css" />
    <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/default.css" />
    <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    <link rel="stylesheet" type="text/css" href="//vjs.zencdn.net/4.12/video-js.css" />

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
  </head>
  <body>
    <div class="container">
      <div class="header row">
        <h3><a class="text-muted col-sm-8" href="../">begriffs</a></h3>

        <ul class="col-sm-4 list-inline">
          <li><a class="text-muted" href="../about.html"><i class="fa fa-info-circle"></i></a></li>
          <li><a class="text-muted" href="http://github.com/begriffs"><i class="fa fa-github"></i></a></li>
          <li><a class="text-muted" href="http://twitter.com/begriffs"><i class="fa fa-twitter"></i></a></li>
          <li><a class="text-muted" href="../atom.xml"><i class="fa fa-rss"></i></a></li>
        </ul>
      </div>

      <div class="post-header">
  <h3>Circular Statistics of SF Bus Routes</h3>
  <a href="https://twitter.com/share" class="twitter-share-button pull-right" data-via="begriffs" data-count="none">Tweet</a>
  <h5 class="text-muted">April  5, 2015</h5>
</div>

<div class="content">
  <p><a href="http://erictheise.com/">Eric Theise</a>, Senior Software Engineer at <a href="http://repairpal.com/">RepairPal</a> asks, “Which way is Inbound?” Though SF Muni routes are prefaced with the modifiers “Inbound” and “Outbound”, their use of the terms often has little to do with the commonly understood meaning. In this presentation Eric uses open data, an open source geostack, and R’s circular package to visually and statistically analyze and discuss the resulting cognitive dissonance.</p>
<video poster="https://i.vimeocdn.com/video/513748329.jpg?mw=700" class="video-js vjs-default-skin" controls preload="auto">
<source src="http://player.vimeo.com/external/124132910.hd.mp4?s=f047700972c48aaaf9c1e0c47a848240" type="video/mp4">
</video>
<h3 id="summary">Summary</h3>
<ul>
<li>Overview of the San Francisco Muni - good coverage, bad timing</li>
<li>All routes are couched in terms of “inbound” and “outbound” which can be counterintuitive in curvy areas of some routes</li>
<li>The origin of the term “inbound” in navigation, and some San Francisco history</li>
<li>Quantifying the notion of “inbound”
<ul>
<li>we’ll attack the problem with statistical tools</li>
<li>mean direction, circular variance, and hypothesis testing</li>
</ul></li>
<li>Circular statistics avoids ambiguity in histograms that “wrap-around” where they can appear either bimodal or unimodal depending on where the wrapping point occurs</li>
<li>Two packages in R for this: circular and CircStates
<ul>
<li>Eric does not know of any python or javascript packages to do this kind of thing</li>
<li>He is working on <a href="Sr%20Engineer,%20RepairPal">mctad.js</a> to address this</li>
</ul></li>
<li>A great resource to learn more is the book <a href="http://circstatinr.st-andrews.ac.uk/">Circular Statistics in R</a></li>
<li>To analyze the concept of inbound and outbound we need route information
<ul>
<li>Eric got the routes from the nextbus API</li>
<li>Stored it in PostgreSQL with the PostGIS extension</li>
</ul></li>
<li>What is the true geospatial centroid of downtown?
<ul>
<li>Turns out it’s the Mechanic’s Monument, created by “the Michelangelo of the West”</li>
</ul></li>
<li>Demo
<ul>
<li>Filter routes, and examine each stop</li>
<li>Find mean direction and variance, stop by stop</li>
<li>Use hypothesis testing to see if in general the bus route has a straightforward labeling of inbound and outbound</li>
<li>Outbound is less defined than inbound as a place (it’s everywhere NOT inbound)</li>
</ul></li>
<li>For more info about Bay Area pedestrian and transit history see the maps of <a href="https://twitter.com/enf">Eric Fisher</a></li>
</ul>
</div>

    </div>

    <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="//vjs.zencdn.net/4.12/video.js"></script>
    <!-- Aww yiss, obsessively watching my numbers! -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-49573102-1', 'begriffs.com');
      ga('send', 'pageview');
    </script>

    <footer class="container">
      <p>I'm begriffs, journeying from web ephemera to the timeless world of data. <a href="mailto:joe@begriffs.com" role="button">Contact me.</a></p>
    </footer>
  </body>
</html>
